<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>区块链 | Blesstosam&#39;s blog</title>
    <meta name="description" content="Blesstosam&#39;s blog">
    <link rel="icon" href="/github-blog/favicon.ico">
    
    <link rel="preload" href="/github-blog/assets/css/0.styles.78aca58c.css" as="style"><link rel="preload" href="/github-blog/assets/js/app.e3b10756.js" as="script"><link rel="preload" href="/github-blog/assets/js/2.1ab0c05b.js" as="script"><link rel="preload" href="/github-blog/assets/js/9.fe6ce754.js" as="script"><link rel="prefetch" href="/github-blog/assets/js/10.74514121.js"><link rel="prefetch" href="/github-blog/assets/js/11.65bfad95.js"><link rel="prefetch" href="/github-blog/assets/js/12.c45d2580.js"><link rel="prefetch" href="/github-blog/assets/js/13.da1d7953.js"><link rel="prefetch" href="/github-blog/assets/js/14.1e637a97.js"><link rel="prefetch" href="/github-blog/assets/js/15.91c4ebc1.js"><link rel="prefetch" href="/github-blog/assets/js/16.f8868b19.js"><link rel="prefetch" href="/github-blog/assets/js/17.92f17462.js"><link rel="prefetch" href="/github-blog/assets/js/18.79071b8a.js"><link rel="prefetch" href="/github-blog/assets/js/19.999d499a.js"><link rel="prefetch" href="/github-blog/assets/js/20.335406b8.js"><link rel="prefetch" href="/github-blog/assets/js/21.7e3b8cf1.js"><link rel="prefetch" href="/github-blog/assets/js/22.b1fff7ad.js"><link rel="prefetch" href="/github-blog/assets/js/23.ccb484b8.js"><link rel="prefetch" href="/github-blog/assets/js/3.55e0a87f.js"><link rel="prefetch" href="/github-blog/assets/js/4.0b322df0.js"><link rel="prefetch" href="/github-blog/assets/js/5.816dad81.js"><link rel="prefetch" href="/github-blog/assets/js/6.abd7a974.js"><link rel="prefetch" href="/github-blog/assets/js/7.cb32d52a.js"><link rel="prefetch" href="/github-blog/assets/js/8.55482e5e.js">
    <link rel="stylesheet" href="/github-blog/assets/css/0.styles.78aca58c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/github-blog/" class="home-link router-link-active"><!----> <span class="site-name">Blesstosam's blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/github-blog/" class="nav-link">首页</a></div><div class="nav-item"><a href="/github-blog/blog/" class="nav-link router-link-active">Blog</a></div> <a href="https://github.com/blesstosam/github-blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/github-blog/" class="nav-link">首页</a></div><div class="nav-item"><a href="/github-blog/blog/" class="nav-link router-link-active">Blog</a></div> <a href="https://github.com/blesstosam/github-blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Blog</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/github-blog/blog/" class="sidebar-link">写在前面</a></li><li><a href="/github-blog/blog/async-catch.html" class="sidebar-link">优雅捕获 async 错误</a></li><li><a href="/github-blog/blog/block-chain.html" class="active sidebar-link">区块链</a></li><li><a href="/github-blog/blog/business.html" class="sidebar-link">早期创业与技术关系不大</a></li><li><a href="/github-blog/blog/check-list.html" class="sidebar-link">代码审查检查项</a></li><li><a href="/github-blog/blog/code-quality.html" class="sidebar-link">代码质量问题</a></li><li><a href="/github-blog/blog/codelife.html" class="sidebar-link">读codelife有感</a></li><li><a href="/github-blog/blog/front-end-rule.html" class="sidebar-link">前端代码规范</a></li><li><a href="/github-blog/blog/good-experience.html" class="sidebar-link">记录好的用户体验</a></li><li><a href="/github-blog/blog/mac-tips.html" class="sidebar-link">Mac Tips</a></li><li><a href="/github-blog/blog/taobao-ten-years.html" class="sidebar-link">读淘宝十年有感</a></li><li><a href="/github-blog/blog/vue-auth.html" class="sidebar-link">Vue权限系统</a></li><li><a href="/github-blog/blog/vue-i18n.html" class="sidebar-link">Vue-i18n 单独使用</a></li><li><a href="/github-blog/blog/vue-ts.html" class="sidebar-link">Vue+ts 实践</a></li><li><a href="/github-blog/blog/write-backend.html" class="sidebar-link">写后台总结</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="区块链"><a href="#区块链" aria-hidden="true" class="header-anchor">#</a> 区块链</h1> <h4 id="_1-所谓区块链的去中心化"><a href="#_1-所谓区块链的去中心化" aria-hidden="true" class="header-anchor">#</a> 1. 所谓区块链的去中心化</h4> <p>区块链本质上是一个数据库，并且这个数据库是由一个个区块所连接而成的，类似于一个链条。就像下面的图片</p> <p><img src="https://timgsa.baidu.com/timg?image&amp;quality=80&amp;size=b9999_10000&amp;sec=1549172175731&amp;di=c0fde1eb04ffd2f8eced91c475fd60bc&amp;imgtype=0&amp;src=http%3A%2F%2Fww1.sinaimg.cn%2Flarge%2Fe0a6aaa4jw1f6y1s3t7rsj20k50dftb2.jpg" alt="image">
链条上每一个小圈就是一个区块，每一个区块都保存了上一个区块的hash值（除了创世区块），以此形成联系；每一个区块都保存了一些信息，比如交易记录，一般为多个交易记录。</p> <div class="language- extra-class"><pre class="language-text"><code>let transactions = [
    {
        fromAddress: 'xxx-bbb',
        toAddress: 'xxx-aaa',
        amount: '100' 
    },
    {
        fromAddress: 'xxx-ddd',
        toAddress: 'xxx-ccc',
        amount: '200' 
    }
]
</code></pre></div><p>那么所谓的去中心化，类比的是传统的数据库。传统的数据库只能被某一个人或某一个公司访问并读写，而区块链，只要接入了区块链网络，每个人都可以对区块链读写（往链条上增加新的区块，即挖矿）。但是有一个限制，就是<strong>它们是不可变的，一旦一个区块被添加到区块链中，除非让剩余的其余区块失效，否则它是不会再被改变的</strong>。所以关键是数据库的开放问题，一个是对一个人开放，一个是对所有人开放。<br>
之前我有一个误解，认为区块链的存储也是去中心化的（即分散的），每一个节点不需要存储所有的区块链信息，只需要存储与自己相关的，只要确保每一个节点上每一个区块是合法的，那么通过链条关系和网络，就能查到所有区块的信息，并且这些信息是真实的。<br>
但是真实情况是，每一个节点不只是存储部分区块，而是一个完整的区块链，从创世块开始到最后一个区块，目前区块链大概有170GB，而且在不断增加。这样每挖到一个矿（产生一个区块），地球上的每一个节点都要同步更新这个区块到链条上去（每一个节点通过p2p协议连接）。<br>
当然，也有只存储部分区块的节点。</p> <h4 id="_2-怎么解决区块链被篡改的问题"><a href="#_2-怎么解决区块链被篡改的问题" aria-hidden="true" class="header-anchor">#</a> 2. 怎么解决区块链被篡改的问题</h4> <p>由于每一个区块都包含了上一个区块的hash，所以如果要改变一个区块（即一笔交易信息），<strong>就要改变每个区块的hash，这需要花费很多时间</strong>，但也并不是不可能。<br>
所以区块链引入了pow（proof of work，工作量证明）来保证区块链的新增和修改是很难做到的。<br>
简单说，就是引入了<strong>难度</strong>，产生区块的必要条件是生成一个hash值，如果规定该hash值需要符合一定规则，比如开头要以5个0开头，那么就需要一定的计算量才能生成区块。难度越高，计算的时间越长，生成区块越难。所以挖矿是一个非常耗费计算力和电力的事情。</p> <h4 id="_3-比特币和挖矿"><a href="#_3-比特币和挖矿" aria-hidden="true" class="header-anchor">#</a> 3. 比特币和挖矿</h4> <h4 id="_4-比特币钱包，私钥，公钥"><a href="#_4-比特币钱包，私钥，公钥" aria-hidden="true" class="header-anchor">#</a> 4. 比特币钱包，私钥，公钥</h4> <p>比特币钱包是一个软件，产生并管理用于交易的账号和密码。其中密码即为私钥，为256位二进制数字组成，总共有2^256种组合，但是一般会转成字符串；私钥经过加工会生成公钥，公钥经过加密生成一个字符串，即为账号，也叫地址。只要私钥确定了，就会产生一个与之对应的地址，并且不可改变。</p> <h4 id="_5-iotx是在以太坊的发的erc20-token，现在在上线我们自己的区块链，未来会转换成自己区块链上的token"><a href="#_5-iotx是在以太坊的发的erc20-token，现在在上线我们自己的区块链，未来会转换成自己区块链上的token" aria-hidden="true" class="header-anchor">#</a> 5. IOTX是在以太坊的发的ERC20 token，现在在上线我们自己的区块链，未来会转换成自己区块链上的token</h4> <h4 id="_6-vote-和stake是把token放进只能合约里面"><a href="#_6-vote-和stake是把token放进只能合约里面" aria-hidden="true" class="header-anchor">#</a> 6. vote 和stake是把token放进只能合约里面</h4> <h4 id="_7-以太坊"><a href="#_7-以太坊" aria-hidden="true" class="header-anchor">#</a> 7. 以太坊</h4> <p>以太坊是一个开源的区块链操作系统（平台）， 人们可以基于以太坊开发出各种区块链应用；并且其在该平台发布的货币名称也叫以太坊，发行量仅次于比特币。所以以太坊有两个意思，平台和数字货币。</p> <h4 id="_8-智能合约-自执行合约"><a href="#_8-智能合约-自执行合约" aria-hidden="true" class="header-anchor">#</a> 8. 智能合约(自执行合约)</h4> <p>自动执行，不可撤回。智能合约由代码编写，并由代码自动执行，不能人工干预。执行智能合约需要 'GAS（汽油）'，即以太坊货币（ETH）。</p> <h4 id="_9-新建智能合约的代码"><a href="#_9-新建智能合约的代码" aria-hidden="true" class="header-anchor">#</a> 9. 新建智能合约的代码</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">this</span><span class="token punctuation">.</span>eth <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Eth</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>web3<span class="token punctuation">.</span>currentProvider<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> contract <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EthContract</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>eth<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> StackingContract <span class="token operator">=</span> <span class="token function">contract</span><span class="token punctuation">(</span><span class="token constant">STAKING_ABI</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>stakingContract <span class="token operator">=</span> StackingContract<span class="token punctuation">.</span><span class="token function">at</span><span class="token punctuation">(</span>stakingContractAddr<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> tokenContract <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EthContract</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>eth<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>tokenContract <span class="token operator">=</span> <span class="token function">tokenContract</span><span class="token punctuation">(</span><span class="token constant">TOKEN_ABI</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">at</span><span class="token punctuation">(</span>tokenContractAddr<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/blesstosam/github-blog/edit/master/docs/blog/block-chain.md" target="_blank" rel="noopener noreferrer">在 GitHub 上编辑此页</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">上次更新: </span> <span class="time">9/13/2019, 8:21:52 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/github-blog/blog/async-catch.html" class="prev">
          优雅捕获 async 错误
        </a></span> <span class="next"><a href="/github-blog/blog/business.html">
          早期创业与技术关系不大
        </a>
        →
      </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/github-blog/assets/js/app.e3b10756.js" defer></script><script src="/github-blog/assets/js/2.1ab0c05b.js" defer></script><script src="/github-blog/assets/js/9.fe6ce754.js" defer></script>
  </body>
</html>
